-- 角色表
DROP TABLE IF EXISTS `ROLE`;
CREATE TABLE `ROLE`  (
  `ID` varchar(128) NOT NULL  COMMENT '主键',
  `NAME` varchar(256)  NOT NULL COMMENT '名称',
  `SHORT_NAME` varchar(128) DEFAULT NULL COMMENT '英文名称，不可以重复，不可更改',
  `MEMBER_ADD_STRATEGY` varchar(128) DEFAULT NULL COMMENT '成员加入该角色的控制策略',
  `ROLE_FLAG` int(2) NOT NULL COMMENT '类型,1：预定义角色，2：自定义角色；预定义角色不可以更改',
  `CHANNEL_ID` varchar(128)  DEFAULT NULL COMMENT '通道编号，预定义角色为空',
  `EXTENDED_DATA` text DEFAULT NULL COMMENT '扩展属性',
  `REMARK` varchar(1024)  DEFAULT NULL COMMENT '备注，说明',
  `CREATE_TIME` timestamp DEFAULT NULL COMMENT '创建时间',
  `UPDATE_TIME` timestamp DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`ID`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;
-- ----------------------------
-- Records of role
-- ----------------------------
INSERT INTO `role` VALUES ('0AEF756CFC89449494953F4AC091D35F', '自定义角色1', 'queryBolckRole1', null, '2', 'D071960503354579AFFB6CEEAB831AE0', null, '查询区块信息的角色哈', '2020-01-13 11:48:08', '2020-01-13 11:52:22');
INSERT INTO `role` VALUES ('2CCBDD1950FD4339B0D2F652B5D980BF', '组织通道管理员', 'organizationChannelAdministrator', null, '1', '', null, '代表组织在某个通道内执行重要的管理操作，可执行哪些操作，取决于具体操作（例如智能合约部署升级操作）的策略定义，这些策略在通道创建时指定', '2020-01-13 11:36:17', '2020-01-13 11:36:17');
INSERT INTO `role` VALUES ('3D4E3FCEA6B84133A9547E18041D7B9C', '写智能合约管理员', 'smartContractWriter', null, '1', '', null, '执行智能合约写权限的角色', '2020-01-13 11:36:17', '2020-01-13 11:36:17');
INSERT INTO `role` VALUES ('40DD2D78E4A3422287A8B1C31D89AE0D', '监控管理员', 'monitor', null, '1', '', null, '一般监控用到的所有查询的角色', '2020-01-13 11:36:17', '2020-01-13 11:36:17');
INSERT INTO `role` VALUES ('5CDDF199984D4B31BD7A57BFB2701719', '自定义角色3', 'queryBolckRole3', null, '2', 'D071960503354579AFFB6CEEAB831AE0', null, '查询区块信息的角色3', '2020-02-05 14:24:27', '2020-02-05 14:24:27');
INSERT INTO `role` VALUES ('BBDBBAA3B36E4C36917417628B20D97C', '自定义角色2223', 'queryBolckRole2223', null, '2', 'D071960503354579AFFB6CEEAB831AE0', null, '查询区块信息的角色2223', '2020-02-03 19:27:28', '2020-02-06 14:14:43');
INSERT INTO `role` VALUES ('D956376A79E4425B9DDE1D18B142D2C2', '节点', 'peer', null, '1', '', null, '对应于某个NewSpiral节点，代表组织在某个或某几个通道内实现区块链的核心逻辑，即智能合约部署、执行、共识、数据同步', '2020-01-13 11:36:17', '2020-01-13 11:36:17');
INSERT INTO `role` VALUES ('DEE826D175964131B7362E2DD99BB058', '组织', 'organization', null, '1', '', null, '代表某个组织管理属于该组织的核心子身份，管理操作包括新建、修改、删除，核心子身份包括组织的通道管理员和节点', '2020-01-13 11:36:17', '2020-01-13 11:36:17');


-- 成员表
DROP TABLE IF EXISTS `MEMBER`;
CREATE TABLE `MEMBER`  (
  `ID` varchar(128) NOT NULL  COMMENT '主键',
  `PUBLIC_KEY` varchar(1024) NOT NULL  COMMENT '数字证书的公钥，长度与具体采用的非对称加解密算法相关',
  `NAME` varchar(256) NOT NULL COMMENT '名称',
  `ISSUER_ID` varchar(1024) DEFAULT NULL  COMMENT '签发者ID',
  `EXTENDED_DATA` text DEFAULT NULL COMMENT '扩展属性',
  `CHANNEL_ID` varchar(128)  NOT NULL COMMENT '通道编号',
  `CERTIFICATE_CER_FILE` longblob  DEFAULT NULL COMMENT '预留字段，PKI中CA证书文件的字节数组',
  `CREATE_TIME` timestamp DEFAULT NULL COMMENT '创建时间',
  `UPDATE_TIME` timestamp DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`ID`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;
-- ----------------------------
-- Records of member
-- ----------------------------
INSERT INTO `member` VALUES ('4FD4189F7F0F424C83B06009A4963CEA', 'MFkwEwYHKoZIzj0CAQYIKoEcz1UBgi0DQgAEC0jI3TQ5E8e7t9iQWPuKqBKa4xP5aBd+WNpn0M9iat4hZtFBhVtI01F9lh5h37GmgkJ4HHkM9YQgz9hXsE1Jeg==', 'memberTest2', '', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-01-13 13:57:35', '2020-01-13 14:12:16');
INSERT INTO `member` VALUES ('52795AAC5A0248F88318ECBADCB25259', 'publicKeyTest2', '测试123', '111111111111122', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-05 14:48:14', '2020-02-05 16:24:22');
INSERT INTO `member` VALUES ('99A7A91EC6704FD38A410F6EEC6EDA10', 'publicKeyTest', '测试123', '1111111111111', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-05 16:23:42', '2020-02-05 16:23:42');
INSERT INTO `member` VALUES ('peer1', 'MFkwEwYHKoZIzj0CAQYIKoEcz1UBgi0DQgAEghS84ZDWPaMkpNaCKrrVdIAMtghcECk30vV+NwWpRckqxicbKcJk+NoJ+Va5WeXzTTLuIuf/pgDBtkC0TYHC6Q==', 'peer1Test', '', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-04 13:57:35', null);
INSERT INTO `member` VALUES ('peer2', 'MFkwEwYHKoZIzj0CAQYIKoEcz1UBgi0DQgAEGJ2MhuR2vNFf38MVlCxiL+NUhHTjp8YIuOwmk+H362iXX6Xqs+e0bysXO1c/rs+PlqKFNq/xzH2muT26zR6uKA==', 'peer2Test', '', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-04 13:57:35', null);
INSERT INTO `member` VALUES ('peer3', 'MFkwEwYHKoZIzj0CAQYIKoEcz1UBgi0DQgAEp1X0AsYix7Zpi/BsdICVRmzlUyyCq+zm/uiRjx3T0xYllXdfx3LdazS2xgUlrGQKSmKUHxVdUN4qnJ3Hn2XG7w==', 'peer3Test', '', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-04 13:57:35', null);
INSERT INTO `member` VALUES ('peer4', 'MFkwEwYHKoZIzj0CAQYIKoEcz1UBgi0DQgAEFVMhVPbK7hweQcpf6T+ZpwKlJXk1ft7YdWD65br94Oc4l7z/0zZGEdH1R578klgHqAmYQdv1IUPhmYqC4wh59A==', 'peer4Test', '', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-04 13:57:35', null);
INSERT INTO `member` VALUES ('peer5', 'MFkwEwYHKoZIzj0CAQYIKoEcz1UBgi0DQgAEspEIYEpt2Gln/3J2yJ+il/FkuKiytj02mUvvixZNWFtDbMr1gxFNu+fx9PwHb6j+ZBVmr0xviqfQgJkcYeK/JA==', 'peer5Test', '', null, 'D071960503354579AFFB6CEEAB831AE0', null, '2020-02-04 13:57:35', null);

-- 成员角色表
DROP TABLE IF EXISTS `MEMBER_ROLE`;
CREATE TABLE `MEMBER_ROLE`  (
  `ID` varchar(128) NOT NULL  COMMENT '主键',
  `MEMBER_ID` varchar(128) NOT NULL COMMENT '成员ID',
  `ROLE_ID` varchar(128) NOT NULL  COMMENT '角色ID',
  `CHANNEL_ID` varchar(128)  NOT NULL COMMENT '通道编号，冗余字段，查询使用',
  PRIMARY KEY (`ID`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;
-- ----------------------------
-- Records of member_role
-- ----------------------------
INSERT INTO `member_role` VALUES ('27013E2E9B484E1EAE36C0FBE3535112', '99A7A91EC6704FD38A410F6EEC6EDA10', 'BBDBBAA3B36E4C36917417628B20D97C', 'D071960503354579AFFB6CEEAB831AE0');
INSERT INTO `member_role` VALUES ('2B9C33237C0F4A549F714C2BFC1D1C60', '4FD4189F7F0F424C83B06009A4963CEA', '3D4E3FCEA6B84133A9547E18041D7B9C', 'D071960503354579AFFB6CEEAB831AE0');
INSERT INTO `member_role` VALUES ('46C84877E80142C4B4555AFD90B6AC59', '4FD4189F7F0F424C83B06009A4963CEA', 'D956376A79E4425B9DDE1D18B142D2C2', 'D071960503354579AFFB6CEEAB831AE0');
INSERT INTO `member_role` VALUES ('BA9FCCD3FEA8473AB66304FF0F4F235F', '4FD4189F7F0F424C83B06009A4963CEA', '2CCBDD1950FD4339B0D2F652B5D980BF', 'D071960503354579AFFB6CEEAB831AE0');
INSERT INTO `member_role` VALUES ('D345EFB4AF69465C8915491EBA454368', '4FD4189F7F0F424C83B06009A4963CEA', 'DEE826D175964131B7362E2DD99BB058', 'D071960503354579AFFB6CEEAB831AE0');
INSERT INTO `member_role` VALUES ('FB534C2B6B4D4412BB6C752396BD6020', '4FD4189F7F0F424C83B06009A4963CEA', '40DD2D78E4A3422287A8B1C31D89AE0D', 'D071960503354579AFFB6CEEAB831AE0');

-- 成员相关添加索引
ALTER TABLE `ROLE` ADD INDEX INDEX_CHANNEL_ID ( `CHANNEL_ID` );
ALTER TABLE `ROLE` ADD INDEX INDEX_ROLE_FLAG ( `ROLE_FLAG` );
ALTER TABLE `MEMBER_ROLE` ADD INDEX INDEX_MEMBER_ID ( `MEMBER_ID` );
ALTER TABLE `MEMBER` ADD INDEX INDEX_CHANNEL_ID ( `CHANNEL_ID` );
ALTER TABLE `MEMBER` ADD INDEX INDEX_PUBLIC_KEY ( `PUBLIC_KEY` );




